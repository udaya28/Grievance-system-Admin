(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{108:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(0),c=a.n(r),s=a(12),o=a.n(s),i=(a(88),a(34)),l=a.n(i),u=a(37),d=a(44),b=a(18),j=(a(90),function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"hello home"})})}),p=a(45),m=a.n(p),h=a(38),x=a.n(h),O=a(199),f=a(198),g=a(192),v=a(197),k=a(193),w=a(190),y=a(70),C=a.n(y),S=a(194),I=a(187),N=a(195),P=c.a.createContext({}),D=c.a.createContext({}),q=c.a.createContext({}),B=(a(108),Object(I.a)((function(e){return{root:{height:"100vh",alignItems:"center",display:"flex",justifyContent:"center"},image:{backgroundImage:'url("https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=1050&q=80")',backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(5,4),display:"flex",flexDirection:"column",alignItems:"center",height:"auto",width:"100%",justify:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))),M=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(""),o=Object(b.a)(s,2),i=o[0],j=o[1],p=Object(r.useState)(!1),h=Object(b.a)(p,2),y=h[0],I=h[1],M=Object(r.useState)(!0),R=Object(b.a)(M,2),T=R[0],W=R[1],H=B(),z=Object(r.useContext)(P),A=Object(r.useContext)(D),E=Object(r.useContext)(q),G=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(a,i),I(!0),""===i||""===a){e.next=16;break}return e.prev=3,A(!0),e.next=7,m.a.post("https://grievance-app-backend.herokuapp.com/student/login",{data:{rollNumber:a,password:i}});case 7:t=e.sent,A(!1),200===t.status&&(E.setID(Object(u.a)(Object(u.a)({},E),{},{id:t.data.id})),1/48,x.a.set("token",t.data.token,{expires:.020833333333333332}),z(!0)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),e.t0.response&&(console.log(e.t0.response),401===e.t0.response.status&&(W(!1),setTimeout((function(){return W(!0)}),5e3),A(!1)));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(w.a,{container:!0,component:"main",className:H.root,children:[Object(n.jsx)(g.a,{}),Object(n.jsx)(w.a,{item:!0,xs:12,sm:8,md:5,className:"login-box",component:k.a,children:Object(n.jsxs)("div",{className:H.paper,children:[Object(n.jsx)(O.a,{className:H.avatar,children:Object(n.jsx)(C.a,{})}),Object(n.jsx)(S.a,{component:"h1",variant:"h6",children:"Sign in"}),Object(n.jsxs)(N.a,{className:H.form,validate:"true",children:[Object(n.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Roll Number",name:"email",autoComplete:"email",onInput:function(e){""===i&&""===a&&I(!1),c(e.target.value)},value:a,error:y&&!a,helperText:y&&!a&&"Roll number field is required",autoFocus:!0}),Object(n.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onInput:function(e){""===i&&""===a&&I(!1),j(e.target.value)},value:i,error:y&&!i,helperText:y&&!i&&"Password field is required",autoComplete:"current-password"}),!T&&Object(n.jsx)(S.a,{color:"error",variant:"caption",align:"left",children:"RollNumber or Password is Invalid"}),Object(n.jsx)(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:H.submit,onClick:G,children:"Sign In"})]})]})})]})},R=a(74),T=a(196),W=a(71);var H=function(){var e=Object(r.useState)(),t=Object(b.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(b.a)(s,2),i=o[0],p=o[1],h=Object(r.useState)({}),O=Object(b.a)(h,2),f=O[0],g=O[1];Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.a.get("token")){e.next=9;break}return p(!0),e.next=4,m.a.get("https://grievance-app-backend.herokuapp.com/auth",{headers:{token:x.a.get("token")}});case 4:t=e.sent,p(!1),200===t.status?(g(Object(u.a)(Object(u.a)({},k),{},{id:t.data.id})),c(!0)):c(!1),e.next=10;break;case 9:c(!1);case 10:case"end":return e.stop()}}),e)})))()}),[]);var v=Object(R.a)({palette:{type:"light",primary:{main:"#3a42bb"}}}),k={id:f.id,setID:g};return Object(n.jsx)(T.a,{theme:v,children:Object(n.jsx)(P.Provider,{value:c,children:Object(n.jsx)(D.Provider,{value:p,children:Object(n.jsx)(q.Provider,{value:k,children:Object(n.jsxs)("div",{className:"App",children:[a?Object(n.jsx)(j,{}):Object(n.jsx)(M,{}),i&&Object(n.jsx)(W.BoxLoading,{color:"#3a42bb",size:"large"})]})})})})})};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(H,{})}),document.getElementById("root"))},88:function(e,t,a){},90:function(e,t,a){}},[[151,1,2]]]);
//# sourceMappingURL=main.0225467a.chunk.js.map