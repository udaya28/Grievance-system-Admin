{"version":3,"sources":["components/home/Home.component.jsx","context/context.jsx","components/login/login.component.jsx","App.js","index.js"],"names":["Home","setLogin","React","createContext","setLoader","studentId","useStyles","makeStyles","theme","root","height","alignItems","display","justifyContent","paper","margin","spacing","flexDirection","width","justify","avatar","backgroundColor","palette","secondary","main","form","marginTop","submit","SignIn","useState","UserName","setUserName","Password","setPassword","ValidationState","setValidationState","IsValid","setIsValid","classes","setIsLoggedIn","useContext","setShowLoader","student","handleSignIn","a","Axios","post","data","userName","password","res","status","setID","id","cookies","set","token","expires","console","log","response","setTimeout","Grid","container","component","className","CssBaseline","item","xs","sm","md","Paper","Avatar","Typography","variant","FormControl","validate","TextField","required","fullWidth","label","name","autoComplete","onInput","e","target","value","error","helperText","autoFocus","type","color","align","Button","onClick","App","IsLoggedIn","showLoader","studentID","setAdminID","useEffect","cookie","get","headers","admin","createMuiTheme","primary","ThemeProvider","Provider","size","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e505ad9d.chunk.js","sourcesContent":["import { React } from 'react';\n\nconst Home = () => {\n  return (\n    <div>\n      <h1>hello home</h1>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nexport const SetThemes = React.createContext({});\nexport const setLogin = React.createContext({});\nexport const setLoader = React.createContext({});\nexport const studentId = React.createContext({});\n","import React, { useState, useContext } from 'react';\nimport Axios from 'axios';\nimport cookies from 'js-cookie';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport { setLogin, setLoader, studentId } from '../../context/context';\nimport './login.styles.css';\n// import ImageHeader from '../imageHeader/ImageHeader';\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  paper: {\n    margin: theme.spacing(5, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    height: 'auto',\n    width: '100%',\n    justify: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nconst SignIn = () => {\n  const [UserName, setUserName] = useState('');\n  const [Password, setPassword] = useState('');\n  const [ValidationState, setValidationState] = useState(false);\n  const [IsValid, setIsValid] = useState(true);\n  const classes = useStyles();\n  const setIsLoggedIn = useContext(setLogin);\n  const setShowLoader = useContext(setLoader);\n  const student = useContext(studentId);\n\n  const handleSignIn = async () => {\n    // console.log(UserName, Password);\n    setValidationState(true);\n    if (Password !== '' && UserName !== '') {\n      try {\n        setShowLoader(true);\n        const res = await Axios.post(\n          'https://grievance-app-backend.herokuapp.com/admin/login',\n          {\n            data: { userName: UserName, password: Password },\n          }\n        );\n        setShowLoader(false);\n        // console.log(res);\n        if (res.status === 200) {\n          student.setID({ ...student, id: res.data.id });\n          // console.log(res.data);\n          let date = 1 / 48; //30 min\n          cookies.set('token', res.data.token, {\n            expires: date,\n          });\n          setIsLoggedIn(true);\n        }\n      } catch (err) {\n        console.log(err);\n        if (err.response) {\n          console.log(err.response);\n          if (err.response.status === 401) {\n            setIsValid(false);\n            setTimeout(() => setIsValid(true), 5000);\n            setShowLoader(false);\n          }\n        }\n      }\n    }\n  };\n\n  const handleUserName = (e) => {\n    Password === '' && UserName === '' && setValidationState(false);\n    setUserName(e.target.value);\n  };\n  const handlePassword = (e) => {\n    Password === '' && UserName === '' && setValidationState(false);\n    setPassword(e.target.value);\n  };\n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <CssBaseline />\n      <Grid item xs={12} sm={8} md={5} className=\"login-box\" component={Paper}>\n        <div className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h6\">\n            Sign in\n          </Typography>\n          <FormControl className={classes.form} validate=\"true\">\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Roll Number\"\n              name=\"email\"\n              autoComplete=\"email\"\n              onInput={handleUserName}\n              value={UserName}\n              error={ValidationState && !UserName}\n              helperText={\n                ValidationState &&\n                !UserName &&\n                'User name field is required'\n              }\n              autoFocus\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              onInput={handlePassword}\n              value={Password}\n              error={ValidationState && !Password}\n              helperText={\n                ValidationState && !Password && 'Password field is required'\n              }\n              autoComplete=\"current-password\"\n            />\n            {!IsValid && (\n              <Typography color=\"error\" variant=\"caption\" align=\"left\">\n                UserName or Password is Invalid\n              </Typography>\n            )}\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={handleSignIn}\n            >\n              Sign In\n            </Button>\n          </FormControl>\n        </div>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default SignIn;\n","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport Home from './components/home/Home.component';\nimport SignIn from './components/login/login.component';\nimport cookie from 'js-cookie';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\nimport { setLogin, setLoader, studentId } from './context/context';\nimport Axios from 'axios';\nimport { BoxLoading } from 'react-loadingg';\nfunction App() {\n  const [IsLoggedIn, setIsLoggedIn] = useState();\n  const [showLoader, setShowLoader] = useState(false);\n  const [studentID, setAdminID] = useState({});\n\n  useEffect(() => {\n    (async () => {\n      if (cookie.get('token')) {\n        setShowLoader(true);\n        const res = await Axios.get(\n          'https://grievance-app-backend.herokuapp.com/auth',\n          {\n            headers: {\n              token: cookie.get('token'),\n            },\n          }\n        );\n        setShowLoader(false);\n        if (res.status === 200) {\n          setAdminID({ ...admin, id: res.data.id });\n          setIsLoggedIn(true);\n        } else {\n          setIsLoggedIn(false);\n        }\n      } else {\n        //logout\n        setIsLoggedIn(false);\n      }\n    })();\n  }, []);\n\n  const theme = createMuiTheme({\n    palette: {\n      type: 'light',\n\n      primary: {\n        main: '#3a42bb',\n      },\n    },\n  });\n  let admin = { id: studentID.id, setID: setAdminID };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <setLogin.Provider value={setIsLoggedIn}>\n        <setLoader.Provider value={setShowLoader}>\n          <studentId.Provider value={admin}>\n            <div className=\"App\">\n              {IsLoggedIn ? <Home /> : <SignIn />}\n              {showLoader && <BoxLoading color=\"#3a42bb\" size=\"large\" />}\n            </div>\n          </studentId.Provider>\n        </setLoader.Provider>\n      </setLogin.Provider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}